webpackJsonp([7],{119:function(t,n,e){"use strict";e(2),e(56)},141:function(t,n,e){"use strict";e.d(n,"a",function(){return a});e(2),e(15);var i=e(69),o=e(142),s=e(72),r=e(73),a=(e(26),function(){return function(t){this.tab1Root=o.a,this.tab2Root=s.a,this.tab3Root=r.a,this.tab4Root=i.a,this.activeHymnal=t.getActiveHymnal()}}())},142:function(t,n,e){"use strict";e.d(n,"a",function(){return o});e(2),e(57),e(15),e(26);var i=e(64),o=(e.n(i),function(){function t(t,n,e){var i=this;this.homeCtrl=t,this.title="MobiHymn",this.myGlobal=n,this.myHttp=e,this.hymnalSubscribe=n.hymnalChange.subscribe(function(t){i.hymnalList=t;for(var n=0;n<i.hymnalList.length;n++)!function(){var t=i.hymnalList[n].id;i.myGlobal.getHymns(i.myHttp,t).subscribe(function(n){i.myGlobal.addToHymns("hymnal"+t,n)})}()})}return t.prototype.setActiveHymnal=function(t){var n=i.filter(this.hymnalList,function(n){return n.id==t})[0];this.myGlobal.setActiveHymnal(n.id),this.myGlobal.setActiveHymn("1"),this.activeHymnal=n.id,this.goToReader(!0)},t.prototype.goToReader=function(t){this.homeCtrl.parent.getByIndex(1).enabled=t,this.homeCtrl.parent.getByIndex(2).enabled=t,this.homeCtrl.parent.select(1)},t.prototype.ngOnInit=function(){var t=this;this.myGlobal.getHymnals(this.myHttp).subscribe(function(n){t.myGlobal.setHymnals(n.output)}),this.activeHymnal=this.myGlobal.getActiveHymnal()},t.prototype.ngOnDestroy=function(){this.hymnalSubscribe.unsubscribe(),this.hymnSubscribe.unsubscribe()},t}())},143:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e(144),o=e(148),s=e(466);e.n(s);Object(i.a)().bootstrapModule(o.a)},148:function(t,n,e){"use strict";e.d(n,"a",function(){return i});e(2),e(23),e(149),e(57),e(15),e(460),e(26),e(119),e(69),e(142),e(72),e(73),e(70),e(68),e(67),e(71),e(141),e(138),e(140);var i=function(){return function(){}}()},26:function(t,n,e){"use strict";var i=e(2),o=e(6),s=(e.n(o),e(165)),r=(e.n(s),this&&this.__decorate||function(t,n,e,i){var o,s=arguments.length,r=s<3?n:null===i?i=Object.getOwnPropertyDescriptor(n,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,n,e,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(r=(s<3?o(r):s>3?o(n,e,r):o(n,e))||r);return s>3&&r&&Object.defineProperty(n,e,r),r}),a=this&&this.__metadata||function(t,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,n)},h=function(){function t(){this.hymnals=new Array,this.hymns={},this.activeHymnal="",this.activeHymn="",this.activeAlignment="left",this.bookmarks=new Array,this.history=new Array,this.recentCount=5,this.padding=0,this.fontSize=1.4,this.hymnalChange=new o.Subject,this.hymnChange=new o.Subject,this.activeHymnalChange=new o.Subject,this.activeHymnChange=new o.Subject,this.bookmarksChange=new o.Subject,this.historyChange=new o.Subject,this.historyCountChange=new o.Subject,this.paddingChange=new o.Subject,this.activeAlignmentChange=new o.Subject,this.fontSizeChange=new o.Subject}return t.prototype.setHymnals=function(t){this.hymnals=t,this.hymnalChange.next(this.hymnals)},t.prototype.addToHymns=function(t,n){this.hymns[t]=n,this.hymnChange.next(this.hymns)},t.prototype.addToBookmarks=function(t){this.bookmarks.push(t),this.bookmarksChange.next(this.bookmarks)},t.prototype.addToRecent=function(t){var n=this.history.findIndex(function(n){return n.hymnalId==t.hymnalId&&n.hymnId==t.hymnId});n>=0&&this.history.splice(n),this.history.splice(0,0,t),this.history.length>this.recentCount&&this.history.splice(this.history.length-1),this.historyChange.next(this.history)},t.prototype.removeFromBookmarks=function(t,n){var e=this.bookmarks.findIndex(function(e){return e.hymnId==n&&e.hymnalId==t});this.bookmarks.splice(e),this.bookmarksChange.next(this.bookmarks)},t.prototype.setActiveHymnal=function(t){this.activeHymnal=t,this.activeHymnalChange.next(this.activeHymnal)},t.prototype.setActiveHymn=function(t){this.activeHymn=t,this.activeHymnChange.next(this.activeHymn);var n=this.activeHymn,e=this.hymns["hymnal"+this.activeHymnal].filter(function(t){return t.id==n})[0];this.addToRecent({hymnalId:this.activeHymnal,hymnId:this.activeHymn,hymnNumber:e.number,hymnTitle:e.title,firstLine:e.firstLine})},t.prototype.setRecentCount=function(t){this.recentCount=t,this.historyCountChange.next(this.recentCount)},t.prototype.setPadding=function(t){this.padding=t,this.paddingChange.next(this.padding)},t.prototype.setActiveAlignment=function(t){this.activeAlignment=t,this.activeAlignmentChange.next(this.activeAlignment)},t.prototype.setFontSize=function(t){this.fontSize=t,this.fontSizeChange.next(this.fontSize)},t.prototype.getHymnalList=function(){return this.hymnals},t.prototype.getHymnList=function(){return this.hymns},t.prototype.getActiveHymnal=function(){return this.activeHymnal},t.prototype.getActiveHymn=function(){return this.activeHymn},t.prototype.getRecentCount=function(){return this.recentCount},t.prototype.getBookmarksList=function(){return this.bookmarks},t.prototype.getRecentList=function(){return this.history},t.prototype.getPadding=function(){return this.padding},t.prototype.getActiveAlignment=function(){return this.activeAlignment},t.prototype.getFontSize=function(){return this.fontSize},t.prototype.getHymnals=function(t){return t.get("../assets/hymnals.json").map(function(t){return t.json()})},t.prototype.getHymns=function(t,n){return t.get("../assets/hymnal "+n+".json").map(function(t){return t.json()})},t.prototype.isInBookmark=function(t,n){return this.bookmarks.findIndex(function(e){return e.hymnalId==t&&e.hymnId==n})>=0},t}();h=r([Object(i.A)(),a("design:paramtypes",[])],h)},460:function(t,n,e){"use strict";e(2),e(15),e(138),e(140),e(26),e(141),e(464),e(465)},67:function(t,n,e){"use strict";e.d(n,"a",function(){return i});e(2),e(15);var i=function(){function t(t,n){this.viewCtrl=t,this.navParams=n}return t.prototype.ionViewDidLoad=function(){this.revisionString=this.navParams.get("revisionString")},t.prototype.dismiss=function(){this.viewCtrl.dismiss()},t}()},68:function(t,n,e){"use strict";e.d(n,"a",function(){return i});e(2),e(15);var i=function(){function t(t,n){this.viewCtrl=t,this.navParams=n}return t.prototype.ionViewDidLoad=function(){},t.prototype.dismiss=function(){this.viewCtrl.dismiss()},t}()},69:function(t,n,e){"use strict";e.d(n,"a",function(){return s});e(2),e(57),e(15);var i=e(67),o=e(68),s=(e(26),function(){function t(t,n,e,i,o){this.navCtrl=t,this.http=n,this.revisionsModal=e,this.authorModal=i,this.global=o,this.recentSubscribe=o.historyCountChange.subscribe(function(t){console.log(t)})}return t.prototype.ionViewDidLoad=function(){var t=this;this.http.get("../assets/revision.html").map(function(t){return t}).subscribe(function(n){t.revisionString=n._body}),this.recentNum=this.global.getRecentCount()},t.prototype.showRevisionModal=function(){this.revisionsModal.create(i.a,{revisionString:this.revisionString}).present()},t.prototype.showAuthorModal=function(){this.authorModal.create(o.a).present()},t.prototype.recentChange=function(){this.global.setRecentCount(this.recentNum)},t}())},70:function(t,n,e){"use strict";e.d(n,"a",function(){return o});e(2),e(15),e(119);var i=e(64),o=(e.n(i),function(){function t(t,n,e,i,o){this.viewCtrl=t,this.alertCtrl=e,this.toastCtrl=i,this.keyboardComp=o,this.hymnList=new Array,this.inputType="all_hymns",this.hymnLimit=5,this.navParams=n}return t.prototype.dismiss=function(){this.viewCtrl.dismiss()},t.prototype.ionViewDidLoad=function(){this.hymnList=this.navParams.get("allHymns"),this.activeHymnal=this.navParams.get("activeHymnal"),this.myGlobal=this.navParams.get("globalService");var t=this.activeHymn=this.myGlobal.getActiveHymn();this.hymnFilter={number:"",tune:""},this.origHymnList=this.hymnList.map(function(t){return Object.assign({},t)}),this.recentList=this.myGlobal.getRecentList(),this.bookmarkList=this.myGlobal.getBookmarksList(),this.origBkmkList=this.bookmarkList.map(function(t){return Object.assign({},t)}),this.keyboardShow="shown",this.hymnFilterString=i.filter(this.hymnList,function(n){return n.id==t})[0].number},t.prototype.filterHymns=function(t){var n=t.target.value;this.hymnList=n?this.origHymnList.filter(function(t){return new RegExp(n).test(t.number)||new RegExp(n).test(t.firstLine)}):this.origHymnList},t.prototype.filterBookmarks=function(t){var n=t.target.value;this.bookmarkList=n?this.origBkmkList.filter(function(t){return new RegExp(n).test(t.number)||new RegExp(n).test(t.firstLine)}):this.origBkmkList},t.prototype.setActiveHymn=function(t){this.myGlobal.setActiveHymn(t),this.viewCtrl.dismiss()},t.prototype.getIndicator=function(){var t=this.hymnLimit,n=this.hymnList.length;return"Displaying "+Math.min(+t,n)+" of "+this.hymnList.length+" hymns"},t.prototype.bkmkSelect=function(){var t=this;setTimeout(function(){t.bkmkFilterSearchbar.setFocus()},200)},t.prototype.handleKeyChange=function(t){if(1!=t.go){this.number=t.outs,this.tune=t.tune,this.hymnFilter.number=this.number,this.hymnFilter.tune=this.tune,this.hymnFilterString=this.hymnFilter.number+this.hymnFilter.tune;var n=this.hymnFilter.number,e=this.hymnFilter.tune;this.hymnList=this.origHymnList.filter(function(t){return new RegExp(n+""+e).test(t.number)})}else{var i=this.hymnFilterString,o=this.origHymnList.filter(function(t){return t.number==i});o.length>0&&this.setActiveHymn(o[0].id)}},t.prototype.showKeyboard=function(){setTimeout(function(){this.keyboardShow="shown",console.log(this.keyboardShow)},100)},t.prototype.presentConfirmUnbookmark=function(){var t=this;this.alertCtrl.create({title:"Confirm removal",message:"Are you sure you want to remove bookmark?",buttons:[{text:"No",handler:function(){}},{text:"Yes",handler:function(){t.myGlobal.removeFromBookmarks(t.activeHymnal,t.activeHymn),t.presentUnbookmarkConfirmed()}}]}).present()},t.prototype.presentUnbookmarkConfirmed=function(){this.toastCtrl.create({message:"Bookmark removed",duration:3e3}).present()},t}())},71:function(t,n,e){"use strict";e.d(n,"a",function(){return i});e(2),e(15),e(26);var i=function(){function t(t,n,e){this.viewCtrl=t,this.navParams=n,this.global=e}return t.prototype.ionViewDidLoad=function(){this.paddingText=this.global.getPadding(),this.alignmentText=this.global.getActiveAlignment()},t.prototype.close=function(){this.viewCtrl.dismiss()},t.prototype.paddingChange=function(){this.global.setPadding(this.paddingText),this.navParams.get("ctrl").extraSpace=this.paddingText},t.prototype.alignmentChange=function(t){this.alignmentText=t,this.global.setActiveAlignment(t),this.navParams.get("ctrl").alignment=t},t}()},72:function(t,n,e){"use strict";e.d(n,"a",function(){return a});e(2),e(56);var i=e(15),o=(e(26),e(70)),s=e(71),r=e(64),a=(e.n(r),function(){function t(t,n,e,i,o,s,a){var h=this;this.readerCtrl=t,this.inputPopCtrl=n,this.inputModalCtrl=e,this.alertCtrl=o,this.toastCtrl=s,this.platform=a,this.scaleState="shown",this.slideUpState="down",this.extraSpace=0,this.alignment="left",this.fontSize=1.4,this.myGlobal=i,this.paddingSubscribe=i.paddingChange.subscribe(function(t){h.extraSpace=t}),this.hymnSubscribe=i.activeHymnChange.subscribe(function(t){var n=h.myGlobal.getHymnList()["hymnal"+h.myGlobal.getActiveHymnal()],e=h.myGlobal.getActiveHymn();h.currentHymn=r.filter(n,function(t){return t.id==e})[0],h.isBookmarked=i.isInBookmark(h.activeHymnal,h.currentHymn.id)}),this.bookmarksSubscribe=i.bookmarksChange.subscribe(function(t){h.isBookmarked=i.isInBookmark(h.activeHymnal,h.currentHymn.id)})}return t.prototype.presentPopover=function(t){this.inputPopCtrl.create(s.a,{ctrl:this}).present({ev:t})},t.prototype.presentInputModal=function(){var t=this.hymnList;this.inputModalCtrl.create(o.a,{allHymns:t,activeHymnal:this.activeHymnal,globalService:this.myGlobal}).present()},t.prototype.presentConfirmUnbookmark=function(){var t=this;this.alertCtrl.create({title:"Confirm removal",message:"Are you sure you want to remove bookmark?",buttons:[{text:"No",handler:function(){}},{text:"Yes",handler:function(){t.myGlobal.removeFromBookmarks(t.activeHymnal,t.currentHymn.id),t.presentUnbookmarkConfirmed()}}]}).present()},t.prototype.presentBookmarkConfirmed=function(){this.toastCtrl.create({message:"Bookmark added",duration:3e3}).present()},t.prototype.presentUnbookmarkConfirmed=function(){this.toastCtrl.create({message:"Bookmark removed",duration:3e3}).present()},t.prototype.ionViewDidLoad=function(){this.activeHymnal=this.myGlobal.getActiveHymnal();var t=this.myGlobal.getHymnList()["hymnal"+this.activeHymnal];this.hymnList=t;var n=this.myGlobal.getActiveHymn();this.currentHymn=r.filter(t,function(t){return t.id==n})[0],this.isBookmarked=this.myGlobal.isInBookmark(this.activeHymnal,this.currentHymn),this.fontSize=this.myGlobal.getFontSize(),this.scrollContent=this.lyricsContainerRef._elementRef.nativeElement.querySelector(".scroll-content"),this.divTab=this.readerCtrl.parent._elementRef.nativeElement.querySelector(".tabbar")},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){t.lyricsContainer=t.lyricsContainerRef._elementRef.nativeElement,t.gesture=new i.a(t.lyricsContainer),t.gesture.listen(),t.gesture.on("pinch",function(n){return t.pinchZoom(n)})},500)},t.prototype.ngOnDestroy=function(){this.hymnSubscribe.unsubscribe(),this.bookmarksSubscribe.unsubscribe(),this.paddingSubscribe.unsubscribe(),this.gesture.destroy()},t.prototype.goToTab=function(t){this.readerCtrl.parent.select(t)},t.prototype.toggleBookmark=function(){this.isBookmarked?this.presentConfirmUnbookmark():(this.myGlobal.addToBookmarks({hymnalId:this.activeHymnal,hymnId:this.currentHymn.id,firstLine:this.currentHymn.firstLine,number:this.currentHymn.number,title:this.currentHymn.title}),this.presentBookmarkConfirmed())},t.prototype.pinchZoom=function(t){console.log(t)},t.prototype.toggleFullLyrics=function(){var t="",n="";this.platform.is("android")||this.platform.is("core")?(t="56px 0",n="translate(0, 56px)"):this.platform.is("ios")?(t="44px 0 49px",n="translate(0, 49px)"):(t="115px 0 0",n="translate(0, -115px)"),"shown"==this.scaleState?(this.scrollContent.animate([{offset:0,margin:t},{offset:1,margin:"0 0 0 0"}],{duration:500,easing:"ease",fill:"forwards"}),this.divTab.animate([{offset:0,transform:"translate(0, 0)"},{offset:1,transform:n}],{duration:500,easing:"ease",fill:"forwards"}),this.slideUpState="up",this.scaleState="hidden"):(this.scrollContent.animate([{offset:0,margin:"0 0 0 0"},{offset:1,margin:t}],{duration:500,easing:"ease",fill:"forwards"}),this.divTab.animate([{offset:0,transform:n},{offset:1,transform:"translate(0, 0)"}],{duration:500,easing:"ease",fill:"forwards"}),this.slideUpState="down",this.scaleState="shown")},t}())},73:function(t,n,e){"use strict";e.d(n,"a",function(){return o});e(2),e(15);var i=e(438),o=(e.n(i),e(26),function(){function t(t,n,e,i){this.searchCtrl=t,this.loadingCtrl=n,this.navParams=e,this.global=i,console.log(i),this.hymnList=i.getHymnList(),this.activeHymnal=i.getActiveHymnal()}return t.prototype.ionViewDidEnter=function(){var t=this;setTimeout(function(){t.hymnFilterSearchbar.setFocus()},500)},t.prototype.getItems=function(t){var n=this;setTimeout(function(){var e=t.target.value,o=n.activeHymnal;n.searchItems=new Array;var s=n.searchItems;n.hymnList["hymnal"+o].forEach(function(t){var n=i(t.lyrics).find(".hymn-line").filter(function(t,n){return new RegExp(e,"gi").test(n.textContent.replace(/,\;\.!\"\:\?/,""))});n.length>0&&n.each(function(n,e){s.findIndex(function(n){return n.number==t.number&&n.line==e.textContent})<0&&s.push({id:t.id,number:t.number,line:e.textContent})})}),n.searchItems.sort(n.sortByLine),n.closeLoader()},100),this.showLoader()},t.prototype.showLoader=function(){(this.searchLoader=this.loadingCtrl.create({content:"Searching...",spinner:"circles"})).present()},t.prototype.closeLoader=function(){this.searchLoader.dismiss()},t.prototype.goToReader=function(t){this.global.setActiveHymn(t),this.searchCtrl.parent.select(1)},t.prototype.sortByLine=function(t,n){var e=t.line.replace(/^\"/,""),i=n.line.replace(/^\"/,"");return e<i?-1:e>i?1:0},t}())},84:function(t,n){function e(t){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+t+"'.")})}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id=84},91:function(t,n,e){function i(t){var n=o[t];return n?e.e(n[1]).then(function(){return e(n[0])}):Promise.reject(new Error("Cannot find module '"+t+"'."))}var o={"../pages/author-modal/author-modal.module":[468,6],"../pages/input-modal/input-modal.module":[470,5],"../pages/reader/reader.module":[472,4],"../pages/revisions-modal/revisions-modal.module":[467,3],"../pages/search/search.module":[473,2],"../pages/settings-popover/settings-popover.module":[471,1],"../pages/settings/settings.module":[469,0]};i.keys=function(){return Object.keys(o)},i.id=91,t.exports=i}},[143]);